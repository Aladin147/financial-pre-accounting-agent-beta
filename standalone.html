<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Financial Pre-Accounting Agent v3.2.0-dev</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <style>
    :root {
      /* Primary colors */
      --primary: #D4B483;
      --primary-light: #F0E2C4;
      --primary-dark: #C19A58;
      
      /* Secondary color */
      --secondary: #6B4E71;
      --secondary-light: #9A7BA5;
      --secondary-dark: #4A3B4F;
      
      /* Background colors */
      --bg-dark: #0a0a0a;
      --bg-card: #121212;
      --bg-card-hover: #1a1a1a;
      
      /* Text colors */
      --text-primary: rgba(255, 255, 255, 0.92);
      --text-secondary: rgba(255, 255, 255, 0.7);
      --text-tertiary: rgba(255, 255, 255, 0.5);
      
      /* Status colors */
      --success: #4CD97B;
      --warning: #FFB020;
      --error: #FF6166;
      --info: #64B5F6;
      
      /* Border & layout */
      --border-radius-sm: 6px;
      --border-radius-md: 12px;
      --border-radius-lg: 16px;
      --border-color: rgba(255, 255, 255, 0.1);
      
      /* Shadows */
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.25);
      
      /* Animation */
      --transition-fast: 0.15s ease;
      --transition-normal: 0.25s ease;
      --transition-slow: 0.4s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-primary);
      overflow-x: hidden;
      display: flex;
      height: 100vh;
    }
    
    /* Sidebar Styles */
    .sidebar {
      width: 260px;
      height: 100vh;
      background: linear-gradient(180deg, #151515 0%, #0a0a0a 100%);
      border-right: 1px solid var(--border-color);
      padding: 24px 0;
      transition: var(--transition-normal);
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
    }
    
    .sidebar-header {
      display: flex;
      align-items: center;
      padding: 0 20px 24px;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 16px;
    }
    
    .sidebar-logo {
      display: flex;
      align-items: center;
    }
    
    .logo-icon {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: var(--bg-dark);
      width: 38px;
      height: 38px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      margin-right: 10px;
      box-shadow: var(--shadow-sm);
    }
    
    .logo-text {
      display: flex;
      flex-direction: column;
    }
    
    .logo-text h1 {
      font-size: 14px;
      font-weight: 600;
      margin: 0;
    }
    
    .logo-text span {
      font-size: 10px;
      color: var(--text-tertiary);
    }
    
    .sidebar-menu {
      flex: 1;
      overflow-y: auto;
      padding: 0 8px;
    }
    
    .menu-section {
      margin-bottom: 16px;
    }
    
    .menu-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-tertiary);
      padding: 8px 12px;
      margin-bottom: 4px;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      transition: var(--transition-fast);
      color: var(--text-secondary);
      margin-bottom: 4px;
      position: relative;
    }
    
    .menu-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
    }
    
    .menu-item.active {
      background-color: rgba(212, 180, 131, 0.15);
      color: var(--primary);
    }
    
    .menu-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 20px;
      background-color: var(--primary);
      border-radius: 0 3px 3px 0;
    }
    
    .menu-item i {
      width: 22px;
      text-align: center;
      margin-right: 12px;
      font-size: 16px;
    }
    
    .menu-item span {
      font-size: 14px;
      font-weight: 500;
    }
    
    .menu-item .badge {
      background-color: var(--primary);
      color: var(--bg-dark);
      font-size: 10px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 10px;
      margin-left: auto;
    }
    
    .sidebar-footer {
      border-top: 1px solid var(--border-color);
      padding: 16px 12px;
    }
    
    .sidebar-user {
      display: flex;
      align-items: center;
      padding: 8px;
      border-radius: var(--border-radius-sm);
      transition: var(--transition-fast);
      cursor: pointer;
    }
    
    .sidebar-user:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--secondary-light) 0%, var(--secondary) 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      margin-right: 10px;
    }
    
    .user-info {
      flex: 1;
    }
    
    .user-name {
      font-size: 13px;
      font-weight: 500;
    }
    
    .user-role {
      font-size: 11px;
      color: var(--text-tertiary);
    }
    
    /* Main Content Styles */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow-y: auto;
      position: relative;
    }
    
    .header {
      background: linear-gradient(90deg, rgba(212, 180, 131, 0.15) 0%, rgba(212, 180, 131, 0.05) 100%);
      backdrop-filter: blur(10px);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 5;
      border-bottom: 1px solid var(--border-color);
    }
    
    .header-title {
      display: flex;
      align-items: center;
    }
    
    .header-title h2 {
      font-size: 18px;
      font-weight: 600;
      background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .header-breadcrumb {
      display: flex;
      align-items: center;
      margin-left: 16px;
      color: var(--text-tertiary);
      font-size: 13px;
    }
    
    .header-breadcrumb i {
      font-size: 10px;
      margin: 0 8px;
    }
    
    .header-breadcrumb span:last-child {
      color: var(--text-secondary);
    }
    
    .header-actions {
      display: flex;
      align-items: center;
    }
    
    .action-item {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 8px;
      cursor: pointer;
      transition: var(--transition-fast);
      color: var(--text-secondary);
      position: relative;
    }
    
    .action-item:hover {
      background-color: rgba(255, 255, 255, 0.08);
      color: var(--text-primary);
    }
    
    .action-item .notification-dot {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: var(--error);
    }
    
    .dashboard {
      padding: 24px;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      grid-gap: 24px;
    }
    
    .welcome-card {
      grid-column: span 12;
      background: linear-gradient(110deg, var(--bg-card) 0%, var(--bg-card-hover) 100%);
      backdrop-filter: blur(5px);
      border-radius: var(--border-radius-lg);
      padding: 24px;
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      overflow: hidden;
      position: relative;
    }
    
    .welcome-card::before {
      content: '';
      position: absolute;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(212, 180, 131, 0.2) 0%, transparent 70%);
      top: -100px;
      right: -50px;
      border-radius: 50%;
    }
    
    .welcome-card::after {
      content: '';
      position: absolute;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle, rgba(107, 78, 113, 0.15) 0%, transparent 70%);
      bottom: -50px;
      left: 30%;
      border-radius: 50%;
    }
    
    .welcome-content {
      flex: 1;
      position: relative;
      z-index: 1;
    }
    
    .welcome-title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    
    .welcome-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      max-width: 600px;
      margin-bottom: 24px;
      line-height: 1.5;
    }
    
    .welcome-actions {
      display: flex;
      gap: 12px;
    }
    
    .welcome-stats {
      display: flex;
      gap: 24px;
      margin-top: 24px;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
    }
    
    .stat-icon {
      width: 44px;
      height: 44px;
      border-radius: var(--border-radius-sm);
      background-color: rgba(212, 180, 131, 0.1);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      margin-right: 12px;
    }
    
    .stat-info h3 {
      font-size: 16px;
      font-weight: 600;
    }
    
    .stat-info span {
      font-size: 13px;
      color: var(--text-tertiary);
    }
    
    .report-card {
      grid-column: span 8;
      background-color: var(--bg-card);
      border-radius: var(--border-radius-lg);
      padding: 20px;
      border: 1px solid var(--border-color);
      position: relative;
      transition: var(--transition-normal);
      height: 400px;
      display: flex;
      flex-direction: column;
    }
    
    .report-card:hover {
      box-shadow: var(--shadow-md);
      border-color: rgba(212, 180, 131, 0.2);
      transform: translateY(-2px);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .card-title {
      font-size: 16px;
      font-weight: 600;
    }
    
    .card-actions {
      display: flex;
      gap: 8px;
    }
    
    .card-action {
      width: 28px;
      height: 28px;
      border-radius: var(--border-radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(255, 255, 255, 0.05);
      color: var(--text-secondary);
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition-fast);
    }
    
    .card-action:hover {
      background-color: rgba(212, 180, 131, 0.1);
      color: var(--primary);
    }
    
    .chart-container {
      flex: 1;
      position: relative;
    }
    
    .document-card {
      grid-column: span 4;
      background-color: var(--bg-card);
      border-radius: var(--border-radius-lg);
      padding: 20px;
      border: 1px solid var(--border-color);
      position: relative;
      transition: var(--transition-normal);
      height: 400px;
      display: flex;
      flex-direction: column;
    }
    
    .document-card:hover {
      box-shadow: var(--shadow-md);
      border-color: rgba(212, 180, 131, 0.2);
      transform: translateY(-2px);
    }
    
    .donut-chart-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .card-grid {
      grid-column: span 12;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }
    
    .feature-card {
      background-color: var(--bg-card);
      backdrop-filter: blur(5px);
      border-radius: var(--border-radius-lg);
      padding: 24px;
      border: 1px solid var(--border-color);
      position: relative;
      transition: var(--transition-normal);
      overflow: hidden;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .feature-card::before {
      content: '';
      position: absolute;
      width: 120px;
      height: 120px;
      background: radial-gradient(circle, rgba(212, 180, 131, 0.1) 0%, transparent 70%);
      top: -20px;
      right: -20px;
      border-radius: 50%;
      z-index: 0;
    }
    
    .feature-card:hover {
      box-shadow: var(--shadow-md);
      border-color: rgba(212, 180, 131, 0.2);
      transform: translateY(-3px);
    }
    
    .feature-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--border-radius-sm);
      background-color: rgba(212, 180, 131, 0.1);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }
    
    .feature-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }
    
    .feature-description {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
      line-height: 1.5;
      flex: 1;
      position: relative;
      z-index: 1;
    }
    
    .feature-action {
      margin-top: auto;
      position: relative;
      z-index: 1;
    }
    
    /* Buttons */
    .btn {
      background-color: transparent;
      border: none;
      border-radius: var(--border-radius-sm);
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-fast);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn i {
      font-size: 14px;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: var(--bg-dark);
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
      box-shadow: 0 0 12px rgba(212, 180, 131, 0.3);
    }
    
    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: var(--secondary-dark);
      box-shadow: 0 0 12px rgba(107, 78, 113, 0.3);
    }
    
    .btn-outline {
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
    }
    
    .btn-outline:hover {
      background-color: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      border-color: var(--primary-light);
    }
    
    .btn-sm {
      padding: 6px 12px;
      font-size: 12px;
    }
    
    .btn-icon {
      width: 36px;
      height: 36px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-icon.btn-sm {
      width: 28px;
      height: 28px;
    }
    
    /* Modal & Overlays */
    #app-info {
      margin-top: 16px;
    }
    
    .modal-card {
      background-color: var(--bg-card);
      border-radius: var(--border-radius-lg);
      border: 1px solid var(--border-color);
      padding: 20px;
      animation: fadeInUp 0.3s ease forwards;
      backdrop-filter: blur(5px);
    }
    
    .modal-card h3 {
      color: var(--primary);
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
    }
    
    .modal-card ul {
      margin: 16px 0;
      padding-left: 20px;
    }
    
    .modal-card ul li {
      margin-bottom: 8px;
      color: var(--text-secondary);
    }
    
    .modal-card p {
      color: var(--text-secondary);
      line-height: 1.5;
    }
    
    #log-area {
      background-color: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-md);
      padding: 16px;
      margin-top: 24px;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Consolas', monospace;
      font-size: 12px;
    }
    
    .log-entry {
      margin-bottom: 8px;
      padding: 8px;
      border-radius: var(--border-radius-sm);
      background-color: rgba(255, 255, 255, 0.03);
      color: var(--text-secondary);
    }
    
    .log-entry.success {
      color: var(--success);
      border-left: 3px solid var(--success);
    }
    
    .log-entry.error {
      color: var(--error);
      border-left: 3px solid var(--error);
    }
    
    .footer {
      text-align: center;
      padding: 20px;
      color: var(--text-tertiary);
      font-size: 12px;
      border-top: 1px solid var(--border-color);
      margin-top: auto;
    }
    
    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in {
      animation: fadeInUp 0.4s ease forwards;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
      .dashboard {
        grid-template-columns: repeat(6, 1fr);
      }
      
      .report-card {
        grid-column: span 6;
      }
      
      .document-card {
        grid-column: span 6;
      }
      
      .card-grid {
        grid-column: span 6;
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        width: 70px;
      }
      
      .logo-text, .menu-item span, .menu-section-title, .user-info {
        display: none;
      }
      
      .menu-item i {
        margin-right: 0;
        font-size: 18px;
      }
      
      .sidebar-user {
        justify-content: center;
      }
      
      .user-avatar {
        margin-right: 0;
      }
      
      .dashboard {
        grid-template-columns: 1fr;
      }
      
      .report-card, .document-card, .card-grid {
        grid-column: span 1;
      }
      
      .welcome-stats {
        flex-direction: column;
        gap: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <div class="logo-icon">
          <i class="fa-solid fa-calculator"></i>
        </div>
        <div class="logo-text">
          <h1>Financial Agent</h1>
          <span>v3.2.0-dev</span>
        </div>
      </div>
    </div>
    
    <div class="sidebar-menu">
      <div class="menu-section">
        <h3 class="menu-section-title">Main Menu</h3>
        <div class="menu-item active">
          <i class="fa-solid fa-gauge-high"></i>
          <span>Dashboard</span>
        </div>
        <div class="menu-item" id="document-menu-item">
          <i class="fa-solid fa-folder-open"></i>
          <span>Documents</span>
          <div class="badge">16</div>
        </div>
        <div class="menu-item">
          <i class="fa-solid fa-calculator"></i>
          <span>Tax Calculator</span>
        </div>
        <div class="menu-item">
          <i class="fa-solid fa-file-invoice"></i>
          <span>Invoices</span>
        </div>
      </div>
      
      <div class="menu-section">
        <h3 class="menu-section-title">Analytics</h3>
        <div class="menu-item">
          <i class="fa-solid fa-chart-column"></i>
          <span>Reports</span>
        </div>
        <div class="menu-item">
          <i class="fa-solid fa-chart-pie"></i>
          <span>Statistics</span>
        </div>
      </div>
      
      <div class="menu-section">
        <h3 class="menu-section-title">System</h3>
        <div class="menu-item">
          <i class="fa-solid fa-gear"></i>
          <span>Settings</span>
        </div>
        <div class="menu-item">
          <i class="fa-solid fa-circle-info"></i>
          <span>Help</span>
        </div>
      </div>
    </div>
    
    <div class="sidebar-footer">
      <div class="sidebar-user">
        <div class="user-avatar">MA</div>
        <div class="user-info">
          <div class="user-name">Moroccan Accounting</div>
          <div class="user-role">Administrator</div>
        </div>
      </div>
    </div>
  </aside>
  
  <!-- Main Content -->
  <main class="main-content">
    <header class="header">
      <div class="header-title">
        <h2>Dashboard</h2>
        <div class="header-breadcrumb">
          <span>Home</span>
          <i class="fa-solid fa-chevron-right"></i>
          <span>Dashboard</span>
        </div>
      </div>
      
      <div class="header-actions">
        <div class="action-item">
          <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <div class="action-item">
          <i class="fa-solid fa-bell"></i>
          <div class="notification-dot"></div>
        </div>
        <div class="action-item">
          <i class="fa-solid fa-gear"></i>
        </div>
      </div>
    </header>
    
    <section class="dashboard">
      <!-- Welcome Card -->
      <div class="welcome-card fade-in">
        <div class="welcome-content">
          <h1 class="welcome-title">Welcome to Financial Pre-Accounting Agent</h1>
          <p class="welcome-subtitle">
            Organize your financial documents, generate tax reports, and estimate payments based on Moroccan Finance Law 2025.
            Keep track of your invoices and streamline your accounting workflow.
          </p>
          <div class="welcome-actions">
            <button class="btn btn-primary" id="get-app-info">
              <i class="fa-solid fa-info-circle"></i>
              App Information
            </button>
            <button class="btn btn-outline" id="view-logs">
              <i class="fa-solid fa-terminal"></i>
              View Logs
            </button>
          </div>
          
          <div class="welcome-stats">
            <div class="stat-item">
              <div class="stat-icon">
                <i class="fa-solid fa-file-invoice"></i>
              </div>
              <div class="stat-info">
                <h3>24</h3>
                <span>Incoming Documents</span>
              </div>
            </div>
            
            <div class="stat-item">
              <div class="stat-icon">
                <i class="fa-solid fa-file-export"></i>
              </div>
              <div class="stat-info">
                <h3>12</h3>
                <span>Outgoing Documents</span>
              </div>
            </div>
            
            <div class="stat-item">
              <div class="stat-icon">
                <i class="fa-solid fa-calculator"></i>
              </div>
              <div class="stat-info">
                <h3>4</h3>
                <span>Tax Calculations</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Financial Charts -->
      <div class="report-card fade-in" style="animation-delay: 0.1s;">
        <div class="card-header">
          <h3 class="card-title">Revenue & Expenses</h3>
          <div class="card-actions">
            <button class="card-action btn-icon btn-sm">
              <i class="fa-solid fa-download"></i>
            </button>
            <button class="card-action btn-icon btn-sm">
              <i class="fa-solid fa-rotate"></i>
            </button>
            <button class="card-action btn-icon btn-sm">
              <i class="fa-solid fa-ellipsis-vertical"></i>
            </button>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="revenue-chart"></canvas>
        </div>
      </div>
      
      <!-- Document Distribution -->
      <div class="document-card fade-in" style="animation-delay: 0.2s;">
        <div class="card-header">
          <h3 class="card-title">Document Distribution</h3>
          <div class="card-actions">
            <button class="card-action btn-icon btn-sm">
              <i class="fa-solid fa-filter"></i>
            </button>
            <button class="card-action btn-icon btn-sm">
              <i class="fa-solid fa-ellipsis-vertical"></i>
            </button>
          </div>
        </div>
        <div class="donut-chart-container">
          <canvas id="document-chart"></canvas>
        </div>
      </div>
      
      <!-- Feature Cards -->
      <div class="card-grid fade-in" style="animation-delay: 0.3s;">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-calculator"></i>
          </div>
          <h3 class="feature-title">Finance Law 2025 Tax Engine</h3>
          <p class="feature-description">
            Complete implementation of progressive tax rates, minimum contribution calculation, and social solidarity contribution.
          </p>
          <div class="feature-action">
            <button class="btn btn-sm btn-outline" id="run-tax-calculation">
              <i class="fa-solid fa-play"></i>
              Run Tax Calculation
            </button>
          </div>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-file-export"></i>
          </div>
          <h3 class="feature-title">PDF Report Generation</h3>
          <p class="feature-description">
            Professional PDF reports with company branding. Detailed financial summaries and tax calculations.
          </p>
          <div class="feature-action">
            <button class="btn btn-sm btn-outline" id="generate-report">
              <i class="fa-solid fa-file-pdf"></i>
              Generate Sample Report
            </button>
          </div>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-folder-tree"></i>
          </div>
          <h3 class="feature-title">Document Organization</h3>
          <p class="feature-description">
            Enhanced document metadata tracking and improved organization for accounting handover.
          </p>
          <div class="feature-action">
            <button class="btn btn-sm btn-outline" id="document-info">
              <i class="fa-solid fa-folder-open"></i>
              View Document Info
            </button>
          </div>
        </div>
      </div>
      
      <!-- App Info Area -->
      <div id="app-info" class="fade-in" style="animation-delay: 0.4s;"></div>
      
      <!-- Log Area -->
      <div id="log-area" class="fade-in" style="animation-delay: 0.45s;">
        <div class="log-entry">Application loaded successfully</div>
      </div>
    </section>
    
    <footer class="footer">
      Financial Pre-Accounting Agent v3.2.0-dev | Based on Finance Law 2025 (Law No. 60-24) | <span id="current-year"></span>
    </footer>
  </main>

  <!-- JavaScript -->
  <script>
    // Chart.js configuration
    Chart.defaults.color = 'rgba(255, 255, 255, 0.7)';
    Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
    Chart.defaults.font.family = "'Inter', sans-serif";
    
    // Create gradient for charts
    function createGradient(ctx, color1, color2) {
      const gradient = ctx.createLinearGradient(0, 0, 0, 400);
      gradient.addColorStop(0, color1);
      gradient.addColorStop(1, color2);
      return gradient;
    }
    
    // Logging function
    function log(message, type = 'info') {
      const logArea = document.getElementById('log-area');
      const entry = document.createElement('div');
      entry.classList.add('log-entry');
      
      if (type === 'success') entry.classList.add('success');
      if (type === 'error') entry.classList.add('error');
      
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logArea.appendChild(entry);
      logArea.scrollTop = logArea.scrollHeight;
    }
    
    // Current year for footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    // Create page containers for extra pages
    function createPageContainers() {
      const mainContent = document.querySelector('.main-content');
      const dashboard = document.querySelector('.dashboard');
      
      // Create page containers
      const pages = [
        { id: 'documents', title: 'Documents', icon: 'folder-open' },
        { id: 'tax-calculator', title: 'Tax Calculator', icon: 'calculator' },
        { id: 'invoices', title: 'Invoices', icon: 'file-invoice' },
        { id: 'reports', title: 'Reports', icon: 'chart-column' },
        { id: 'statistics', title: 'Statistics', icon: 'chart-pie' },
        { id: 'settings', title: 'Settings', icon: 'gear' },
        { id: 'help', title: 'Help', icon: 'circle-info' }
      ];
      
      pages.forEach(page => {
        const pageContainer = document.createElement('section');
        pageContainer.className = 'dashboard';
        pageContainer.id = `${page.id}-page`;
        pageContainer.style.display = 'none';

        // Custom content for Documents page to add the 3.2.0 features
        if (page.id === 'documents') {
          pageContainer.innerHTML = `
            <div class="welcome-card fade-in">
              <div class="welcome-content">
                <h1 class="welcome-title">${page.title}</h1>
                <p class="welcome-subtitle">
                  Organize, process and manage your financial documents according to Moroccan Finance Law 2025.
                  The document manager supports batch processing with OCR and data extraction.
                </p>
                
                <div class="header-actions" style="margin-bottom: 20px;">
                  <button class="btn btn-primary" id="open-document-upload">
                    <i class="fa-solid fa-upload"></i>
                    Upload Documents
                  </button>
                  <button class="btn btn-outline" id="select-documents">
                    <i class="fa-solid fa-folder-open"></i>
                    Select Files
                  </button>
                </div>
                
                <div class="tabs">
                  <button class="tab-button active" data-tab="incoming">
                    Incoming Invoices <span class="count">(24)</span>
                  </button>
                  <button class="tab-button" data-tab="outgoing">
                    Outgoing Invoices <span class="count">(12)</span>
                  </button>
                </div>
                
                <div id="document-list-container" class="document-container" style="margin-top: 20px; min-height: 200px;">
                  <!-- Document list will be populated here -->
                  <div class="documents-grid">
                    <!-- Sample document item -->
                    <div class="document-item">
                      <div class="document-icon">
                        <i class="fa-solid fa-file-pdf"></i>
                      </div>
                      <div class="document-details">
                        <div class="document-name">invoice_2025_032.pdf</div>
                        <div class="document-meta">245 KB • 28/03/2025</div>
                      </div>
                      <div class="document-confidence">
                        <div class="confidence-bar" style="width: 85%"></div>
                        <div class="confidence-text">85%</div>
                      </div>
                    </div>
                    
                    <!-- Sample document items to show the implementation -->
                    <div class="document-item">
                      <div class="document-icon">
                        <i class="fa-solid fa-file-image"></i>
                      </div>
                      <div class="document-details">
                        <div class="document-name">receipt_march2025.jpg</div>
                        <div class="document-meta">128 KB • 24/03/2025</div>
                      </div>
                      <div class="document-confidence">
                        <div class="confidence-bar" style="width: 72%"></div>
                        <div class="confidence-text">72%</div>
                      </div>
                    </div>
                    
                    <div class="document-item">
                      <div class="document-icon">
                        <i class="fa-solid fa-file-excel"></i>
                      </div>
                      <div class="document-details">
                        <div class="document-name">expenses_q1_2025.xlsx</div>
                        <div class="document-meta">367 KB • 18/03/2025</div>
                      </div>
                      <div class="document-confidence">
                        <div class="confidence-bar" style="width: 94%"></div>
                        <div class="confidence-text">94%</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div id="document-processor-container" style="margin-top: 24px;">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="card-title">Document Processing</h3>
                      <div class="card-actions">
                        <button class="card-action btn-icon btn-sm" id="processor-help-btn">
                          <i class="fa-solid fa-circle-info"></i>
                        </button>
                      </div>
                    </div>
                    
                    <div id="processor-help-panel" style="display: none; margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: var(--border-radius-md); border-left: 3px solid var(--primary);">
                      <h4 style="margin-top: 0; color: var(--primary);">About Document Processing</h4>
                      <p style="font-size: 14px; color: var(--text-secondary);">
                        Document processing extracts financial data from your invoices and receipts
                        using OCR technology. This helps organize your financial records and simplifies
                        tax calculations.
                      </p>
                      <h4 style="color: var(--primary);">Processing Steps:</h4>
                      <ol style="font-size: 14px; color: var(--text-secondary);">
                        <li>OCR text extraction from documents</li>
                        <li>Financial data recognition (amounts, dates, vendors)</li>
                        <li>Document classification (incoming/outgoing)</li>
                        <li>Currency detection and conversion</li>
                      </ol>
                    </div>
                    
                    <div class="processor-controls" style="margin: 16px 0; display: flex; justify-content: space-between; align-items: center;">
                      <button class="btn btn-sm btn-outline" id="select-all-docs">
                        Select All
                      </button>
                      <div class="selection-info">
                        <span id="selection-count">0 of 3 selected</span>
                      </div>
                    </div>
                    
                    <div class="processor-actions" style="margin-top: 20px; text-align: right;">
                      <button class="btn btn-primary" id="start-processing">
                        Process Selected Documents
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Document upload modal -->
                <div id="document-upload-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.8); z-index: 1000; align-items: center; justify-content: center;">
                  <div class="modal-container" style="width: 80%; max-width: 800px; background-color: var(--bg-card); border-radius: var(--border-radius-lg); border: 1px solid var(--border-color); padding: 24px; max-height: 90vh; overflow: auto;">
                    <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                      <h2 style="font-size: 18px; font-weight: 600; margin: 0;">Upload Documents</h2>
                      <button class="close-button" style="background: none; border: none; color: var(--text-tertiary); cursor: pointer; font-size: 18px;" id="close-upload-modal">
                        <i class="fa-solid fa-times"></i>
                      </button>
                    </div>
                    
                    <div class="dropzone" style="border: 2px dashed var(--border-color); border-radius: var(--border-radius-md); padding: 40px; text-align: center; background-color: rgba(255, 255, 255, 0.03); margin-bottom: 20px; transition: all var(--transition-normal);">
                      <div class="dropzone-content">
                        <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;">
                          <i class="fa-solid fa-cloud-arrow-up"></i>
                        </div>
                        <h3 style="margin-bottom: 0.5rem;">Drag & Drop Files</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">or click to select files from your computer</p>
                        <button class="btn btn-outline" id="browse-files">
                          Browse Files
                        </button>
                        <input type="file" id="file-input" multiple style="display: none;">
                      </div>
                    </div>
                    
                    <div id="selected-files-container" style="display: none; margin-bottom: 20px;">
                      <h3 style="margin-bottom: 12px;">Selected Files (<span id="file-count">0</span>)</h3>
                      <div id="file-list" style="max-height: 300px; overflow-y: auto; margin-bottom: 16px;"></div>
                    </div>
                    
                    <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 12px;">
                      <button class="btn btn-outline" id="cancel-upload">
                        Cancel
                      </button>
                      <button class="btn btn-primary" id="upload-files" disabled>
                        Upload Files
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
        } else {
          pageContainer.innerHTML = `
            <div class="welcome-card fade-in">
              <div class="welcome-content">
                <h1 class="welcome-title">${page.title}</h1>
                <p class="welcome-subtitle">
                  This is the ${page.title.toLowerCase()} page of the Financial Pre-Accounting Agent.
                  Here you can manage all ${page.title.toLowerCase()}-related functions in accordance with Moroccan Finance Law 2025.
                </p>
                
                <div class="content-placeholder">
                  <i class="fa-solid fa-${page.icon}" style="font-size: 48px; margin-bottom: 16px;"></i>
                  <p>Content for ${page.title} will be implemented in the next version.</p>
                </div>
              </div>
            </div>
          `;
        }
        
        mainContent.insertBefore(pageContainer, document.querySelector('.footer'));
      });
      
      // Create special content for tax calculator
      const taxCalculatorPage = document.getElementById('tax-calculator-page');
      if (taxCalculatorPage) {
        taxCalculatorPage.innerHTML = `
          <div class="welcome-card fade-in">
            <div class="welcome-content">
              <h1 class="welcome-title">Tax Calculator</h1>
              <p class="welcome-subtitle">
                Calculate your taxes based on Morocco's Finance Law 2025. This calculator implements 
                the latest progressive tax rates and minimum contribution rules.
              </p>
              
              <div class="card" style="margin-top: 20px;">
                <h2 class="card-title">Tax Calculation Form</h2>
                <form id="tax-form" style="margin-top: 20px;">
                  <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Revenue (MAD)</label>
                    <input type="number" id="revenue-input" placeholder="Enter total revenue" 
                      style="width: 100%; padding: 10px; background-color: rgba(255,255,255,0.05); border: 1px solid var(--border-color); border-radius: var(--border-radius-sm); color: var(--text-primary);" 
                      value="1500000">
                  </div>
                  
                  <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Expenses (MAD)</label>
                    <input type="number" id="expenses-input" placeholder="Enter total expenses" 
                      style="width: 100%; padding: 10px; background-color: rgba(255,255,255,0.05); border: 1px solid var(--border-color); border-radius: var(--border-radius-sm); color: var(--text-primary);" 
                      value="800000">
                  </div>
                  
                  <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Other Deductions (MAD)</label>
                    <input type="number" id="deductions-input" placeholder="Enter other deductions" 
                      style="width: 100%; padding: 10px; background-color: rgba(255,255,255,0.05); border: 1px solid var(--border-color); border-radius: var(--border-radius-sm); color: var(--text-primary);" 
                      value="50000">
                  </div>
                  
                  <div style="margin-top: 24px; display: flex; gap: 12px;">
                    <button type="button" id="calculate-tax-btn" class="btn btn-primary">
                      <i class="fa-solid fa-calculator"></i>
                      Calculate Tax
                    </button>
                    
                    <button type="reset" class="btn btn-outline">
                      <i class="fa-solid fa-eraser"></i>
                      Reset
                    </button>
                  </div>
                </form>
              </div>
              
              <div id="tax-results" class="card" style="margin-top: 20px; display: none;">
                <h2 class="card-title">Tax Calculation Results</h2>
                <div id="tax-results-content" style="margin-top: 16px;"></div>
              </div>
            </div>
          </div>
        `;
      }
    }
    
    // Initialize charts on document load
    document.addEventListener('DOMContentLoaded', () => {
      // Create page containers for sidebar menu items
      createPageContainers();
      
      // Handle sidebar menu item clicks
      document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', function() {
          // Remove active class from all menu items
          document.querySelectorAll('.menu-item').forEach(mi => mi.classList.remove('active'));
          // Add active class to clicked menu item
          this.classList.add('active');
          
          // Get the menu item text
          const menuText = this.querySelector('span')?.textContent || 'Dashboard';
          
          // Update header title and breadcrumb
          document.querySelector('.header-title h2').textContent = menuText;
          document.querySelector('.header-breadcrumb span:last-child').textContent = menuText;
          
          // Get the corresponding page ID
          let pageId;
          if (menuText === 'Dashboard') pageId = 'dashboard';
          else pageId = menuText.toLowerCase().replace(/\s+/g, '-');
          
          // Hide all pages
          document.querySelectorAll('.dashboard').forEach(page => {
            page.style.display = 'none';
          });
          
          // Show the selected page
          const targetPage = document.getElementById(`${pageId}-page`) || 
                             document.querySelector('.dashboard');
          targetPage.style.display = 'grid';
          
          log(`Navigated to ${menuText}`, 'success');
        });
      });
      
      // Handle header action icons
      document.querySelectorAll('.action-item').forEach(item => {
        item.addEventListener('click', function() {
          const icon = this.querySelector('i');
          const iconClass = icon.className;
          
          let actionName = 'Unknown';
          if (iconClass.includes('magnifying-glass')) actionName = 'Search';
          else if (iconClass.includes('bell')) actionName = 'Notifications';
          else if (iconClass.includes('gear')) actionName = 'Settings';
          
          log(`${actionName} action clicked`, 'info');
          
          if (actionName === 'Settings') {
            // Activate Settings menu item
            document.querySelectorAll('.menu-item').forEach(mi => {
              if (mi.querySelector('span')?.textContent === 'Settings') {
                mi.click();
              }
            });
          }
        });
      });
      
      // Handle user account click
      document.querySelector('.sidebar-user').addEventListener('click', function() {
        const appInfo = document.getElementById('app-info');
        appInfo.innerHTML = `
          <div class="modal-card">
            <h3>User Account</h3>
            <p><strong>Name:</strong> Moroccan Accounting</p>
            <p><strong>Role:</strong> Administrator</p>
            <p><strong>Last Login:</strong> April 1, 2025 11:32 PM</p>
            <p><strong>Session:</strong> Active for 32 minutes</p>
            
            <h3 style="margin-top: 16px;">Account Features</h3>
            <ul>
              <li>Full administrator access</li>
              <li>Document management permissions</li>
              <li>Tax calculation authorization</li>
              <li>Report generation</li>
              <li>System configuration</li>
            </ul>
          </div>
        `;
        log('User account information displayed', 'success');
      });
      
      // Add event listener for tax calculator in the special page
      document.addEventListener('click', function(e) {
        if (e.target && e.target.id === 'calculate-tax-btn') {
          const revenueInput = document.getElementById('revenue-input');
          const expensesInput = document.getElementById('expenses-input');
          const deductionsInput = document.getElementById('deductions-input');
          
          if (revenueInput && expensesInput && deductionsInput) {
            const revenue = parseFloat(revenueInput.value) || 0;
            const expenses = parseFloat(expensesInput.value) || 0;
            const deductions = parseFloat(deductionsInput.value) || 0;
            
            // Calculate taxable income
            const taxableIncome = Math.max(0, revenue - expenses - deductions);
            
            // Finance Law 2025 tax brackets
            let tax = 0;
            if (taxableIncome <= 300000) {
              tax = taxableIncome * 0.175;
            } else if (taxableIncome <= 1000000) {
              tax = 300000 * 0.175 + (taxableIncome - 300000) * 0.2;
            } else {
              tax = 300000 * 0.175 + 700000 * 0.2 + (taxableIncome - 1000000) * 0.2275;
            }
            
            // Minimum contribution calculation (0.25% of revenue)
            const minimumContribution = revenue * 0.0025;
            
            // Final tax is the higher of calculated tax and minimum contribution
            const finalTax = Math.max(tax, minimumContribution);
            
            // Effective tax rate
            const effectiveTaxRate = taxableIncome > 0 ? (finalTax / taxableIncome) * 100 : 0;
            
            // Format numbers
            const formatNumber = (num) => {
              return num.toLocaleString('fr-MA', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
              });
            };
            
            // Display results
            const taxResultsContent = document.getElementById('tax-results-content');
            if (taxResultsContent) {
              taxResultsContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Revenue:</span>
                  <span style="font-weight: 600;">${formatNumber(revenue)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Expenses:</span>
                  <span style="font-weight: 600;">${formatNumber(expenses)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Other Deductions:</span>
                  <span style="font-weight: 600;">${formatNumber(deductions)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Taxable Income:</span>
                  <span style="font-weight: 600;">${formatNumber(taxableIncome)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Calculated Tax:</span>
                  <span style="font-weight: 600;">${formatNumber(tax)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Minimum Contribution:</span>
                  <span style="font-weight: 600;">${formatNumber(minimumContribution)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color);">
                  <span style="font-weight: 500;">Final Tax:</span>
                  <span style="font-weight: 600; color: var(--primary);">${formatNumber(finalTax)} MAD</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                  <span style="font-weight: 500;">Effective Tax Rate:</span>
                  <span style="font-weight: 600; color: var(--primary);">${effectiveTaxRate.toFixed(2)}%</span>
                </div>
              `;
              
              document.getElementById('tax-results').style.display = 'block';
              log('Tax calculation completed successfully', 'success');
            }
          }
        }
      });
      // Revenue vs Expenses Chart
      const revenueCtx = document.getElementById('revenue-chart').getContext('2d');
      
      // Example data for last 6 months
      const labels = ['October', 'November', 'December', 'January', 'February', 'March'];
      const revenueData = [120000, 145000, 210000, 180000, 195000, 230000];
      const expenseData = [85000, 90000, 125000, 110000, 105000, 130000];
      const profitData = revenueData.map((rev, i) => rev - expenseData[i]);
      
      const revenueChart = new Chart(revenueCtx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'Revenue',
              data: revenueData,
              backgroundColor: createGradient(revenueCtx, 'rgba(212, 180, 131, 0.8)', 'rgba(212, 180, 131, 0.2)'),
              borderColor: '#D4B483',
              borderWidth: 1
            },
            {
              label: 'Expenses',
              data: expenseData,
              backgroundColor: createGradient(revenueCtx, 'rgba(107, 78, 113, 0.8)', 'rgba(107, 78, 113, 0.2)'),
              borderColor: '#6B4E71',
              borderWidth: 1
            },
            {
              label: 'Net Profit',
              data: profitData,
              type: 'line',
              fill: false,
              borderColor: '#64B5F6',
              tension: 0.4,
              pointBackgroundColor: '#64B5F6',
              pointBorderColor: '#fff',
              pointRadius: 5
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Revenue vs Expenses (Last 6 Months)',
              color: 'rgba(255, 255, 255, 0.87)',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            legend: {
              position: 'bottom'
            },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              titleColor: '#D4B483',
              callbacks: {
                label: function(context) {
                  return `${context.dataset.label}: ${context.parsed.y.toLocaleString()} MAD`;
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                callback: function(value) {
                  if (value >= 1000) {
                    return (value / 1000) + 'k MAD';
                  }
                  return value + ' MAD';
                }
              }
            },
            x: {
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              }
            }
          }
        }
      });
      
      // Document Distribution Chart
      const documentCtx = document.getElementById('document-chart').getContext('2d');
      
      // Example data for document types
      const documentChart = new Chart(documentCtx, {
        type: 'doughnut',
        data: {
          labels: ['Invoices', 'Receipts', 'Bank Statements', 'Tax Forms', 'Other'],
          datasets: [{
            data: [42, 28, 15, 10, 5],
            backgroundColor: [
              '#D4B483',
              '#6B4E71',
              '#64B5F6',
              '#4CD97B',
              '#FFB020'
            ],
            borderColor: '#121212',
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Document Type Distribution',
              color: 'rgba(255, 255, 255, 0.87)',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            legend: {
              position: 'bottom'
            },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              callbacks: {
                label: function(context) {
                  const total = context.dataset.data.reduce((a, b) => a + b, 0);
                  const percentage = Math.round((context.parsed * 100) / total);
                  return `${context.label}: ${context.parsed} (${percentage}%)`;
                }
              }
            }
          },
          cutout: '60%'
        }
      });
      
      // Button event listeners
      document.getElementById('get-app-info').addEventListener('click', () => {
        const appInfo = document.getElementById('app-info');
        appInfo.innerHTML = `
          <div class="modal-card">
            <h3>Application Information</h3>
            <p><strong>Application:</strong> Financial Pre-Accounting Agent</p>
            <p><strong>Version:</strong> 3.2.0-dev</p>
            <p><strong>Tax Rule Version:</strong> Finance Law 2025 (Law No. 60-24)</p>
            <p><strong>Theme:</strong> Mustard Dark Theme</p>
            
            <h3 style="margin-top: 16px;">Version 3.2.0-dev Features</h3>
            <ul>
              <li>Enhanced Document Manager with drag-and-drop functionality</li>
              <li>Batch document processing with OCR and data extraction</li>
              <li>Multi-document selection for batch operations</li>
              <li>Improved document organization workflow</li>
              <li>Interactive document processing with progress tracking</li>
              <li>Confidence score visualization for processed documents</li>
            </ul>
          </div>
        `;
        log('Application information displayed', 'success');
      });
      
      document.getElementById('view-logs').addEventListener('click', () => {
        log('Log viewer accessed', 'info');
        log('System ready - All modules loaded', 'success');
        log('Finance Law 2025 tax engine initialized', 'success');
        log('Document scanning module ready', 'success');
      });
      
      document.getElementById('run-tax-calculation').addEventListener('click', () => {
        const appInfo = document.getElementById('app-info');
        appInfo.innerHTML = `
          <div class="modal-card">
            <h3>Tax Calculation Results</h3>
            <p><strong>Revenue:</strong> 1,500,000 MAD</p>
            <p><strong>Expenses:</strong> 800,000 MAD</p>
            <p><strong>Taxable Income:</strong> 650,000 MAD</p>
            <p><strong>Calculated Tax:</strong> 137,375 MAD</p>
            <p><strong>Minimum Contribution:</strong> 3,750 MAD</p>
            <p><strong>Final Tax:</strong> 137,375 MAD</p>
            <p><strong>Effective Tax Rate:</strong> 21.13%</p>
            
            <p style="margin-top: 16px; font-size: 12px; color: var(--text-tertiary);">
              * Based on Finance Law 2025 (Law No. 60-24)
            </p>
          </div>
        `;
        log('Tax calculation completed successfully', 'success');
      });
      
      document.getElementById('generate-report').addEventListener('click', () => {
        const appInfo = document.getElementById('app-info');
        appInfo.innerHTML = `
          <div class="modal-card">
            <h3>Report Generated</h3>
            <p>Financial Summary Report has been generated successfully.</p>
            <p><strong>File:</strong> FinancialSummary_Q1_2025.pdf</p>
            <p><strong>Location:</strong> /reports/financial/</p>
            <p><strong>Size:</strong> 1.2 MB</p>
            <p><strong>Report Type:</strong> Quarterly Financial Summary</p>
            <p><strong>Period:</strong> Q1 2025 (January - March)</p>
          </div>
        `;
        log('PDF report generated successfully', 'success');
      });
      
      document.getElementById('document-info').addEventListener('click', () => {
        const appInfo = document.getElementById('app-info');
        appInfo.innerHTML = `
          <div class="modal-card">
            <h3>Document Information</h3>
            <p><strong>Total Incoming Documents:</strong> 24</p>
            <p><strong>Total Outgoing Documents:</strong> 12</p>
            <p><strong>Main Documents Path:</strong> /documents/financial</p>
            <p><strong>Incoming Documents Path:</strong> /documents/financial/incoming</p>
            <p><strong>Outgoing Documents Path:</strong> /documents/financial/outgoing</p>
            <p><strong>Last Document Scanned:</strong> invoice_2025_032.pdf</p>
            <p><strong>Last Document Time:</strong> 2025-03-28 15:42:18</p>
          </div>
        `;
        log('Document information retrieved successfully', 'success');
      });
      
      // Document management functionality for version 3.2.0
      document.addEventListener('click', function(e) {
        // Document page tabs functionality
        if (e.target.classList.contains('tab-button') || e.target.closest('.tab-button')) {
          const tab = e.target.closest('.tab-button');
          if (!tab) return;
          
          const tabType = tab.dataset.tab;
          if (!tabType) return;
          
          // Update active tab
          document.querySelectorAll('.tab-button').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          log(`Switched to ${tabType} documents tab`, 'success');
        }
        
        // Open document upload modal
        if (e.target.id === 'open-document-upload' || e.target.closest('#open-document-upload')) {
          const modal = document.getElementById('document-upload-modal');
          if (modal) {
            modal.style.display = 'flex';
            log('Opened document upload modal', 'info');
          }
        }
        
        // Close document upload modal
        if (e.target.id === 'close-upload-modal' || e.target.closest('#close-upload-modal') || 
            e.target.id === 'cancel-upload' || e.target.closest('#cancel-upload')) {
          const modal = document.getElementById('document-upload-modal');
          if (modal) {
            modal.style.display = 'none';
            
            // Clear selected files
            document.getElementById('file-input').value = '';
            document.getElementById('selected-files-container').style.display = 'none';
            document.getElementById('file-list').innerHTML = '';
            document.getElementById('file-count').textContent = '0';
            document.getElementById('upload-files').disabled = true;
            
            log('Closed document upload modal', 'info');
          }
        }
        
        // Toggle processor help panel
        if (e.target.id === 'processor-help-btn' || e.target.closest('#processor-help-btn')) {
          const helpPanel = document.getElementById('processor-help-panel');
          if (helpPanel) {
            helpPanel.style.display = helpPanel.style.display === 'none' ? 'block' : 'none';
            log(`${helpPanel.style.display === 'none' ? 'Closed' : 'Opened'} document processor help`, 'info');
          }
        }
        
        // Browse files button in upload modal
        if (e.target.id === 'browse-files' || e.target.closest('#browse-files')) {
          document.getElementById('file-input').click();
        }
        
        // Select/deselect all documents
        if (e.target.id === 'select-all-docs' || e.target.closest('#select-all-docs')) {
          const documentItems = document.querySelectorAll('.document-item');
          const selectionCount = document.getElementById('selection-count');
          
          // Check if any documents are already selected
          const hasSelected = Array.from(documentItems).some(item => item.classList.contains('selected'));
          
          // Toggle selection state for all documents
          documentItems.forEach(item => {
            item.classList.toggle('selected', !hasSelected);
          });
          
          // Update selection count
          if (selectionCount) {
            const selectedCount = hasSelected ? 0 : documentItems.length;
            selectionCount.textContent = `${selectedCount} of ${documentItems.length} selected`;
          }
          
          // Update process button state
          const processButton = document.getElementById('start-processing');
          if (processButton) {
            processButton.disabled = hasSelected;
          }
          
          log(`${hasSelected ? 'Deselected' : 'Selected'} all documents`, 'info');
        }
        
        // Document selection
        if (e.target.classList.contains('document-item') || e.target.closest('.document-item')) {
          const documentItem = e.target.closest('.document-item');
          if (!documentItem) return;
          
          // Toggle selection state
          documentItem.classList.toggle('selected');
          
          // Update selection count
          const documentItems = document.querySelectorAll('.document-item');
          const selectedItems = document.querySelectorAll('.document-item.selected');
          
          const selectionCount = document.getElementById('selection-count');
          if (selectionCount) {
            selectionCount.textContent = `${selectedItems.length} of ${documentItems.length} selected`;
          }
          
          // Update process button state
          const processButton = document.getElementById('start-processing');
          if (processButton) {
            processButton.disabled = selectedItems.length === 0;
          }
          
          log(`${documentItem.classList.contains('selected') ? 'Selected' : 'Deselected'} document ${documentItem.querySelector('.document-name').textContent}`, 'info');
        }
        
        // Start document processing
        if (e.target.id === 'start-processing' || e.target.closest('#start-processing')) {
          const selectedItems = document.querySelectorAll('.document-item.selected');
          if (selectedItems.length === 0) return;
          
          const appInfo = document.getElementById('app-info');
          if (appInfo) {
            appInfo.innerHTML = `
              <div class="modal-card">
                <h3>Document Processing Results</h3>
                <p>Successfully processed ${selectedItems.length} documents:</p>
                <ul>
                  ${Array.from(selectedItems).map(item => {
                    const name = item.querySelector('.document-name').textContent;
                    return `<li>${name}: Data extracted with ${item.querySelector('.confidence-text').textContent} confidence</li>`;
                  }).join('')}
                </ul>
                <p><strong>Extracted Data:</strong></p>
                <ul>
                  <li>Vendor: ACME Corporation</li>
                  <li>Invoice Number: INV-2025-042</li>
                  <li>Amount: 23,540.00 MAD</li>
                  <li>VAT: 4,708.00 MAD (20%)</li>
                  <li>Date: 28/03/2025</li>
                </ul>
              </div>
            `;
          }
          
          // Update UI to indicate processing is complete
          selectedItems.forEach(item => {
            const confidenceBar = item.querySelector('.confidence-bar');
            const confidenceText = item.querySelector('.confidence-text');
            
            if (confidenceBar && confidenceText) {
              confidenceBar.style.width = '100%';
              confidenceText.textContent = '100%';
            }
          });
          
          log(`Successfully processed ${selectedItems.length} documents`, 'success');
        }
      });
      
      // Document file input handler
      document.getElementById('file-input')?.addEventListener('change', function(e) {
        if (!e.target.files || e.target.files.length === 0) return;
        
        const files = Array.from(e.target.files);
        const fileListContainer = document.getElementById('file-list');
        const fileCountElem = document.getElementById('file-count');
        const selectedFilesContainer = document.getElementById('selected-files-container');
        const uploadButton = document.getElementById('upload-files');
        
        if (fileListContainer && fileCountElem && selectedFilesContainer && uploadButton) {
          // Clear existing files
          fileListContainer.innerHTML = '';
          
          // Add files to list
          files.forEach((file, index) => {
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            fileItem.style.display = 'flex';
            fileItem.style.alignItems = 'center';
            fileItem.style.padding = '10px';
            fileItem.style.borderBottom = '1px solid var(--border-color)';
            
            let icon = 'fa-file';
            if (file.type.includes('pdf')) icon = 'fa-file-pdf';
            else if (file.type.includes('image')) icon = 'fa-file-image';
            else if (file.type.includes('excel') || file.type.includes('spreadsheet')) icon = 'fa-file-excel';
            else if (file.type.includes('word') || file.type.includes('document')) icon = 'fa-file-word';
            
            // Format file size
            const formatSize = (bytes) => {
              if (bytes === 0) return '0 Bytes';
              const k = 1024;
              const sizes = ['Bytes', 'KB', 'MB', 'GB'];
              const i = Math.floor(Math.log(bytes) / Math.log(k));
              return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;
            };
            
            fileItem.innerHTML = `
              <div style="font-size: 1.5rem; color: var(--primary); margin-right: 12px;">
                <i class="fa-solid ${icon}"></i>
              </div>
              <div style="flex: 1">
                <div style="font-weight: 500; font-size: 14px; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 300px;">${file.name}</div>
                <div style="font-size: 12px; color: var(--text-tertiary);">${formatSize(file.size)}</div>
              </div>
              <button class="remove-file" data-index="${index}" style="background: none; border: none; color: var(--text-tertiary); cursor: pointer; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                <i class="fa-solid fa-times"></i>
              </button>
            `;
            
            fileListContainer.appendChild(fileItem);
          });
          
          // Update file count and show the container
          fileCountElem.textContent = files.length;
          selectedFilesContainer.style.display = 'block';
          
          // Enable upload button
          uploadButton.disabled = files.length === 0;
          
          log(`Selected ${files.length} file(s) for upload`, 'info');
        }
      });
      
      // Handle upload files button
      document.getElementById('upload-files')?.addEventListener('click', function() {
        const fileInput = document.getElementById('file-input');
        if (!fileInput || !fileInput.files || fileInput.files.length === 0) return;
        
        const files = Array.from(fileInput.files);
        
        // Simulate upload completion
        setTimeout(() => {
          // Close the modal
          const modal = document.getElementById('document-upload-modal');
          if (modal) {
            modal.style.display = 'none';
          }
          
          // Clear file input
          fileInput.value = '';
          
          // Update document count in the Documents tab button
          const documentsTab = document.querySelector('.tab-button[data-tab="incoming"]');
          if (documentsTab) {
            const countSpan = documentsTab.querySelector('.count');
            if (countSpan) {
              const currentCount = parseInt(countSpan.textContent.replace(/[()]/g, ''), 10) || 0;
              countSpan.textContent = `(${currentCount + files.length})`;
            }
          }
          
          // Show success message
          const appInfo = document.getElementById('app-info');
          if (appInfo) {
            appInfo.innerHTML = `
              <div class="modal-card">
                <h3>Upload Complete</h3>
                <p>${files.length} file(s) uploaded successfully.</p>
                <ul>
                  ${files.map(file => `<li>${file.name}</li>`).join('')}
                </ul>
                <p>Files are ready for processing.</p>
              </div>
            `;
          }
          
          log(`Successfully uploaded ${files.length} file(s)`, 'success');
        }, 1500);
        
        log('Uploading files...', 'info');
      });
      
      // Add styles for document items
      const styleSheet = document.createElement('style');
      styleSheet.innerHTML = `
        .document-item {
          display: flex;
          align-items: center;
          padding: 12px;
          border-radius: var(--border-radius-md);
          background-color: var(--bg-card-hover);
          margin-bottom: 8px;
          cursor: pointer;
          transition: all var(--transition-fast);
          border: 1px solid transparent;
        }
        
        .document-item:hover {
          transform: translateY(-2px);
          box-shadow: var(--shadow-sm);
        }
        
        .document-item.selected {
          border-color: var(--primary);
          background-color: rgba(212, 180, 131, 0.1);
        }
        
        .document-icon {
          font-size: 24px;
          color: var(--primary);
          margin-right: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 40px;
        }
        
        .document-details {
          flex: 1;
        }
        
        .document-name {
          font-weight: 500;
          margin-bottom: 4px;
        }
        
        .document-meta {
          font-size: 12px;
          color: var(--text-tertiary);
        }
        
        .document-confidence {
          width: 100px;
          margin-left: 16px;
        }
        
        .confidence-bar {
          height: 6px;
          background-color: var(--primary);
          border-radius: 3px;
          margin-bottom: 4px;
        }
        
        .confidence-text {
          font-size: 12px;
          color: var(--text-secondary);
          text-align: right;
        }
        
        .documents-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 12px;
          margin-top: 16px;
        }
        
        .tabs {
          display: flex;
          gap: 16px;
          border-bottom: 1px solid var(--border-color);
          margin-bottom: 20px;
        }
        
        .tab-button {
          background: none;
          border: none;
          color: var(--text-secondary);
          padding: 8px 0;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          position: relative;
        }
        
        .tab-button:after {
          content: '';
          position: absolute;
          bottom: -1px;
          left: 0;
          width: 0;
          height: 2px;
          background-color: var(--primary);
          transition: width var(--transition-normal);
        }
        
        .tab-button.active {
          color: var(--primary);
        }
        
        .tab-button.active:after {
          width: 100%;
        }
        
        .tab-button .count {
          font-size: 12px;
          color: var(--text-tertiary);
          margin-left: 4px;
        }
      `;
      document.head.appendChild(styleSheet);
    });
  </script>
</body>
</html>
